{"ast":null,"code":"var _jsxFileName = \"/Users/Guild/Documents/Local_School/COMP_4533/assignment_1/my-app/src/components/PlayDetailApp.js\";\nimport React from \"react\";\nimport FavouritesList from \"./FavouritesList.js\";\nimport PlayOverview from \"./PlayOverview.js\";\nimport PlayData from \"./PlayData.js\";\nimport \"./css/PlayDetailApp.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PlayDetailApp extends React.Component {\n  constructor(props) {\n    super(props);\n    const tabs = [\"Details\", \"Characters\", \"Text\"];\n    this.state = {\n      currentTab: tabs[0],\n      tabs: props.play.filename ? tabs : [tabs[0]],\n      playData: [],\n      currentAct: null,\n      currentScene: null,\n      currentCharacter: null\n    };\n  }\n\n  async componentDidMount() {\n    const play = this.props.play;\n\n    if (play.filename) {\n      const foundPlayData = this.props.playData.find(p => p.id === play.id);\n\n      if (!foundPlayData) {\n        try {\n          const url = \"https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/play.php?name=\" + play.id;\n          const response = await fetch(url);\n          const data = await response.json();\n          this.setState({\n            playData: data\n          });\n          this.setState({\n            currentAct: data.acts[0]\n          });\n          this.setState({\n            currentScene: data.acts[0].scenes[0]\n          });\n          this.setState({\n            currentCharacter: data.acts[0].scenes[0].speaches[0].speaker\n          });\n          this.props.savePlayData(play, data);\n          console.log(data);\n        } catch {\n          console.error(\"fetch error\");\n        }\n      } else {\n        this.setState({\n          playData: foundPlayData\n        });\n        this.setState({\n          currentAct: foundPlayData.acts[0]\n        });\n        this.setState({\n          currentScene: foundPlayData.acts[0].scenes[0]\n        });\n        this.setState({\n          currentCharacter: foundPlayData.acts[0].scenes[0].speaches[0].speaker\n        });\n      }\n    }\n  }\n\n  render() {\n    const setCurrentTab = tab => {\n      this.setState({\n        currentTab: tab\n      });\n    };\n\n    const setCurrentAct = act => {\n      const acts = [...this.props.playData.acts];\n      const foundAct = acts.find(a => a.name === act);\n      this.setState({\n        currentAct: foundAct\n      });\n    };\n\n    const setCurrentScene = scene => {\n      this.setState({\n        currentScene: scene\n      });\n    };\n\n    const setCurrentCharacter = character => {\n      this.setState({\n        currentCharacter: character\n      });\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"play-detail hidden-favourites\",\n      children: [/*#__PURE__*/_jsxDEV(FavouritesList, {\n        favourites: this.props.favourites,\n        removeFromFavourites: this.props.removeFromFavourites\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PlayOverview, {\n        currentTab: this.state.currentTab,\n        play: this.props.play,\n        playData: this.state.playData,\n        addToFavourites: this.props.addToFavourites\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PlayData, {\n        currentTab: this.state.currentTab,\n        tabs: this.state.tabs,\n        play: this.props.play,\n        playData: this.state.playData,\n        setCurrentTab: setCurrentTab\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default PlayDetailApp;","map":{"version":3,"sources":["/Users/Guild/Documents/Local_School/COMP_4533/assignment_1/my-app/src/components/PlayDetailApp.js"],"names":["React","FavouritesList","PlayOverview","PlayData","PlayDetailApp","Component","constructor","props","tabs","state","currentTab","play","filename","playData","currentAct","currentScene","currentCharacter","componentDidMount","foundPlayData","find","p","id","url","response","fetch","data","json","setState","acts","scenes","speaches","speaker","savePlayData","console","log","error","render","setCurrentTab","tab","setCurrentAct","act","foundAct","a","name","setCurrentScene","scene","setCurrentCharacter","character","favourites","removeFromFavourites","addToFavourites"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport FavouritesList from \"./FavouritesList.js\";\nimport PlayOverview from \"./PlayOverview.js\";\nimport PlayData from \"./PlayData.js\";\nimport \"./css/PlayDetailApp.css\";\n\nclass PlayDetailApp extends React.Component {\n    constructor(props) {\n        super(props);\n        const tabs = [\"Details\", \"Characters\", \"Text\"];\n        this.state = {currentTab: tabs[0],\n                      tabs: props.play.filename ? tabs : [tabs[0]],\n                      playData: [],\n                      currentAct: null,\n                      currentScene: null,\n                      currentCharacter: null};\n    }\n                            \n    async componentDidMount() {\n        const play = this.props.play;\n        \n        if (play.filename) {\n            const foundPlayData = this.props.playData.find((p) => p.id === play.id);\n\n            if (!foundPlayData) {\n                try {\n                    const url = \"https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/play.php?name=\" + play.id;\n                    const response = await fetch(url);\n                    const data = await response.json();\n                    this.setState({playData: data});\n                    this.setState({currentAct: data.acts[0]});\n                    this.setState({currentScene: data.acts[0].scenes[0]});\n                    this.setState({currentCharacter: data.acts[0].scenes[0].speaches[0].speaker});\n                    this.props.savePlayData(play, data);\n                    console.log(data);\n                } \n                catch {\n                    console.error(\"fetch error\");\n                }\n            }\n            else {\n                this.setState({playData: foundPlayData});\n                this.setState({currentAct: foundPlayData.acts[0]});\n                this.setState({currentScene: foundPlayData.acts[0].scenes[0]});\n                this.setState({currentCharacter: foundPlayData.acts[0].scenes[0].speaches[0].speaker});\n            }\n        }\n    }\n    \n    render() {\n        const setCurrentTab = (tab) => {\n            this.setState({currentTab: tab});\n        }\n        \n        const setCurrentAct = (act) => {\n            const acts = [...this.props.playData.acts];\n            const foundAct = acts.find((a) => a.name === act);\n            this.setState({currentAct: foundAct});\n        }\n        \n        const setCurrentScene = (scene) => {\n            this.setState({currentScene: scene});\n        }\n        \n        const setCurrentCharacter = (character) => {\n            this.setState({currentCharacter: character});\n        }\n        \n        return (\n            <div className=\"play-detail hidden-favourites\">\n                <FavouritesList favourites={this.props.favourites} removeFromFavourites={this.props.removeFromFavourites}/>\n                <PlayOverview currentTab={this.state.currentTab} play={this.props.play} playData={this.state.playData} addToFavourites={this.props.addToFavourites} />\n                <PlayData currentTab={this.state.currentTab} tabs={this.state.tabs} play={this.props.play} playData={this.state.playData} setCurrentTab={setCurrentTab}/>\n            </div>\n        );\n    }\n};\n\nexport default PlayDetailApp"]},"metadata":{},"sourceType":"module"}